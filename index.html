<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POS B√°n H√†ng Nhanh</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* T√πy ch·ªânh thanh cu·ªôn cho ƒë·∫πp */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 3px; }
        .product-card:active { transform: scale(0.95); transition: 0.1s; }
    </style>
</head>
<body class="bg-gray-100 h-screen flex overflow-hidden font-sans">

    <div class="w-[65%] flex flex-col h-full border-r border-gray-300 bg-white">
        <div class="p-4 border-b border-gray-200 bg-white shadow-sm z-10">
            <input type="text" id="searchInput" placeholder="üîç T√¨m t√™n m√≥n ho·∫∑c gi√° ti·ªÅn..." 
                   class="w-full p-3 border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            
            <div class="flex gap-2 mt-3 overflow-x-auto">
                <button onclick="filterCategory('all')" class="px-4 py-1 bg-gray-800 text-white rounded-full text-sm hover:bg-gray-700">T·∫•t c·∫£</button>
                <button onclick="filterCategory('food')" class="px-4 py-1 bg-gray-200 text-gray-800 rounded-full text-sm hover:bg-gray-300">ƒê·ªì ƒÉn</button>
                <button onclick="filterCategory('drink')" class="px-4 py-1 bg-gray-200 text-gray-800 rounded-full text-sm hover:bg-gray-300">ƒê·ªì u·ªëng</button>
            </div>
        </div>

        <div id="productList" class="flex-1 overflow-y-auto p-4 grid grid-cols-3 gap-4 content-start bg-gray-50">
            </div>
    </div>

    <div class="w-[35%] flex flex-col h-full bg-white shadow-2xl z-20">
        <div class="p-4 bg-blue-600 text-white flex justify-between items-center shadow">
            <h2 class="text-xl font-bold">H√≥a ƒê∆°n M·ªõi</h2>
            <button onclick="clearCart()" class="text-xs bg-red-500 hover:bg-red-600 px-3 py-1 rounded">X√≥a t·∫•t c·∫£</button>
        </div>

        <div id="cartItems" class="flex-1 overflow-y-auto p-4 space-y-3">
            </div>

        <div class="p-4 bg-gray-50 border-t border-gray-300 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]">
            <div class="flex justify-between mb-2 text-gray-600 text-lg">
                <span>T·ªïng ti·ªÅn h√†ng:</span>
                <span id="totalAmount" class="font-bold text-gray-900">0</span>
            </div>
            
            <div class="flex items-center justify-between mb-4">
                <span class="text-gray-600">Kh√°ch ƒë∆∞a:</span>
                <input type="number" id="customerPay" oninput="calculateChange()" 
                       class="w-40 p-2 text-right text-xl font-bold border border-blue-300 rounded focus:ring-2 focus:ring-blue-500 text-blue-700" placeholder="0">
            </div>
            
            <div class="flex justify-end gap-2 mb-4">
                <button onclick="setCash(50000)" class="text-xs bg-gray-200 px-2 py-1 rounded border border-gray-400">50k</button>
                <button onclick="setCash(100000)" class="text-xs bg-gray-200 px-2 py-1 rounded border border-gray-400">100k</button>
                <button onclick="setCash(500000)" class="text-xs bg-gray-200 px-2 py-1 rounded border border-gray-400">500k</button>
            </div>

            <div class="flex justify-between items-center pt-3 border-t border-gray-300 mb-4">
                <span class="font-bold text-gray-800">TI·ªÄN TH·ª™A:</span>
                <span id="changeAmount" class="text-2xl font-extrabold text-green-600">0</span>
            </div>

            <button onclick="alert('ƒê√£ in h√≥a ƒë∆°n & L∆∞u ƒë∆°n h√†ng!')" class="w-full bg-blue-600 hover:bg-blue-700 text-white text-xl font-bold py-4 rounded-lg shadow-lg uppercase transition">
                THANH TO√ÅN (F1)
            </button>
        </div>
    </div>

    <script>
        // 1. D·ªÆ LI·ªÜU S·∫¢N PH·∫®M (B·∫°n c√≥ th·ªÉ th√™m s·ª≠a tho·∫£i m√°i ·ªü ƒë√¢y)
        const products = [
            { id: 1, name: "Cafe ƒêen ƒê√°", price: 25000, cat: "drink", img: "‚òï" },
            { id: 2, name: "Cafe S·ªØa ƒê√°", price: 29000, cat: "drink", img: "ü•§" },
            { id: 3, name: "B·∫°c X·ªâu", price: 35000, cat: "drink", img: "ü•õ" },
            { id: 4, name: "Tr√† ƒê√†o Cam S·∫£", price: 45000, cat: "drink", img: "üçπ" },
            { id: 5, name: "G√† R√°n (1 mi·∫øng)", price: 35000, cat: "food", img: "üçó" },
            { id: 6, name: "Khoai T√¢y Chi√™n", price: 25000, cat: "food", img: "üçü" },
            { id: 7, name: "Hamburger B√≤", price: 55000, cat: "food", img: "üçî" },
            { id: 8, name: "M√¨ √ù S·ªët B√≤", price: 45000, cat: "food", img: "üçù" },
            { id: 9, name: "N∆∞·ªõc Su·ªëi", price: 10000, cat: "drink", img: "üíß" },
        ];

        let cart = []; // Gi·ªè h√†ng tr·ªëng ban ƒë·∫ßu

        // 2. H√ÄM HI·ªÇN TH·ªä DANH S√ÅCH S·∫¢N PH·∫®M
        function renderProducts(filter = 'all') {
            const list = document.getElementById('productList');
            list.innerHTML = '';
            
            const filtered = filter === 'all' ? products : products.filter(p => p.cat === filter);

            filtered.forEach(p => {
                const item = document.createElement('div');
                item.className = "product-card bg-white p-4 rounded-xl shadow cursor-pointer border hover:border-blue-500 hover:shadow-lg flex flex-col items-center justify-center h-40";
                item.onclick = () => addToCart(p.id);
                item.innerHTML = `
                    <div class="text-5xl mb-2">${p.img}</div>
                    <h3 class="font-bold text-gray-700 text-center text-sm mb-1">${p.name}</h3>
                    <p class="text-orange-600 font-bold">${p.price.toLocaleString()} ƒë</p>
                `;
                list.appendChild(item);
            });
        }

        // 3. LOGIC GI·ªé H√ÄNG
        function addToCart(id) {
            const item = cart.find(i => i.id === id);
            if (item) {
                item.qty++;
            } else {
                const product = products.find(p => p.id === id);
                cart.push({ ...product, qty: 1 });
            }
            renderCart();
        }

        function updateQty(id, change) {
            const item = cart.find(i => i.id === id);
            if (item) {
                item.qty += change;
                if (item.qty <= 0) {
                    cart = cart.filter(i => i.id !== id); // X√≥a n·∫øu s·ªë l∆∞·ª£ng = 0
                }
            }
            renderCart();
        }

        function clearCart() {
            if(confirm('B·∫°n ch·∫Øc ch·∫Øn mu·ªën x√≥a ƒë∆°n n√†y?')) {
                cart = [];
                renderCart();
                document.getElementById('customerPay').value = '';
                calculateChange();
            }
        }

        function renderCart() {
            const cartList = document.getElementById('cartItems');
            cartList.innerHTML = '';
            let total = 0;

            cart.forEach(item => {
                const lineTotal = item.price * item.qty;
                total += lineTotal;
                
                const div = document.createElement('div');
                div.className = "flex justify-between items-center bg-gray-50 p-2 rounded border border-gray-200";
                div.innerHTML = `
                    <div class="flex-1">
                        <div class="font-bold text-sm text-gray-800">${item.name}</div>
                        <div class="text-xs text-gray-500">${item.price.toLocaleString()} x ${item.qty}</div>
                    </div>
                    <div class="flex items-center gap-2">
                        <button onclick="updateQty(${item.id}, -1)" class="w-8 h-8 flex items-center justify-center bg-gray-200 hover:bg-gray-300 rounded font-bold text-gray-700">-</button>
                        <span class="font-bold w-6 text-center">${item.qty}</span>
                        <button onclick="updateQty(${item.id}, 1)" class="w-8 h-8 flex items-center justify-center bg-blue-100 hover:bg-blue-200 rounded font-bold text-blue-700">+</button>
                    </div>
                    <div class="w-20 text-right font-bold text-gray-800 text-sm">
                        ${lineTotal.toLocaleString()}
                    </div>
                `;
                cartList.appendChild(div);
            });

            document.getElementById('totalAmount').innerText = total.toLocaleString() + ' ƒë';
            document.getElementById('totalAmount').dataset.value = total; // L∆∞u gi√° tr·ªã s·ªë ƒë·ªÉ t√≠nh to√°n
            calculateChange();
        }

        // 4. LOGIC T√çNH TI·ªÄN
        function calculateChange() {
            const total = parseInt(document.getElementById('totalAmount').dataset.value || 0);
            const customerPay = parseInt(document.getElementById('customerPay').value || 0);
            const changeElement = document.getElementById('changeAmount');

            const change = customerPay - total;

            if (customerPay === 0) {
                changeElement.innerText = "0";
                changeElement.style.color = "gray";
            } else if (change < 0) {
                changeElement.innerText = "Thi·∫øu " + Math.abs(change).toLocaleString();
                changeElement.style.color = "red";
            } else {
                changeElement.innerText = change.toLocaleString() + " ƒë";
                changeElement.style.color = "#16a34a"; // Green
            }
        }

        function setCash(amount) {
            document.getElementById('customerPay').value = amount;
            calculateChange();
        }

        function filterCategory(cat) {
            renderProducts(cat);
        }

        // KH·ªûI CH·∫†Y L·∫¶N ƒê·∫¶U
        renderProducts();
    </script>
</body>
</html>

