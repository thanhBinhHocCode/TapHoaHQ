<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá th·ªëng POS B√°n H√†ng - ·∫¢nh L·ªõn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* TƒÉng k√≠ch th∆∞·ªõc t·ªëi thi·ªÉu c·ªßa m·ªói √¥ s·∫£n ph·∫©m ƒë·ªÉ ·∫£nh hi·ªÉn th·ªã l·ªõn h∆°n */
        .product-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); 
            gap: 1.5rem; 
        }
        .cart-item-list { max-height: 450px; overflow-y: auto; }
        
        /* ƒê·∫£m b·∫£o ·∫£nh lu√¥n vu√¥ng v√† l·∫•p ƒë·∫ßy khung */
        .product-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 0.5rem 0.5rem 0 0;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <div class="flex h-screen">
        <div class="w-7/12 p-6 flex flex-col border-r bg-white overflow-y-auto">
            <div class="mb-6">
                <input type="text" id="searchInput" placeholder="T√¨m t√™n s·∫£n ph·∫©m nhanh..." class="w-full p-3 border-2 border-blue-100 rounded-xl shadow-sm focus:border-blue-500 outline-none transition-all">
            </div>
            
            <div class="flex gap-3 mb-6 overflow-x-auto pb-2 items-center">
                <span class="font-bold text-gray-500 whitespace-nowrap">L·ªçc theo:</span>
                <button onclick="filterCategory('All')" class="px-5 py-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 shadow-md transition">T·∫•t c·∫£</button>
                <button onclick="filterCategory('B√°nh k·∫πo')" class="px-5 py-2 bg-white border border-gray-300 rounded-full hover:bg-gray-100 shadow-sm transition">B√°nh k·∫πo</button>
                <button onclick="filterCategory('Gia v·ªã')" class="px-5 py-2 bg-white border border-gray-300 rounded-full hover:bg-gray-100 shadow-sm transition">Gia v·ªã</button>
                <button onclick="filterCategory('N∆∞·ªõc gi·∫£i kh√°t')" class="px-5 py-2 bg-white border border-gray-300 rounded-full hover:bg-gray-100 shadow-sm transition">N∆∞·ªõc gi·∫£i kh√°t</button>
                <button onclick="filterCategory('M√¨ t√¥m')" class="px-5 py-2 bg-white border border-gray-300 rounded-full hover:bg-gray-100 shadow-sm transition">M√¨ t√¥m</button>
            </div>

            <div id="productGrid" class="product-grid">
                </div>
        </div>

        <div class="w-5/12 p-6 bg-gray-50 flex flex-col justify-between shadow-2xl">
            <div>
                <h2 class="text-2xl font-black mb-6 text-gray-800 border-b-4 border-blue-500 pb-2">H√ìA ƒê∆†N T·∫†M T√çNH</h2>
                <div class="flex gap-2 mb-4">
                    <div class="bg-blue-100 p-2 rounded-lg text-blue-600">üë§</div>
                    <input type="text" id="customerName" placeholder="T√™n kh√°ch h√†ng (kh√¥ng b·∫Øt bu·ªôc)" class="w-full p-2 bg-transparent border-b-2 border-gray-300 focus:border-blue-500 outline-none">
                </div>
                
                <div id="cartItems" class="cart-item-list space-y-3">
                    <p class="text-center text-gray-400 mt-10 italic">Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o ƒë∆∞·ª£c ch·ªçn</p>
                </div>
            </div>

            <div class="border-t-2 border-dashed pt-6 mt-4">
                <div class="flex justify-between text-2xl font-black text-blue-700">
                    <span>T·ªîNG TI·ªÄN:</span>
                    <span id="totalAmount">0ƒë</span>
                </div>
                
                <div class="mt-6 p-4 bg-white rounded-xl shadow-inner">
                    <p class="text-sm font-bold text-gray-500 mb-2 uppercase">Ti·ªÅn kh√°ch ƒë∆∞a:</p>
                    <div class="grid grid-cols-4 gap-2 mb-3">
                        <button onclick="setCash(50000)" class="bg-gray-100 hover:bg-blue-100 py-2 rounded font-bold transition">50k</button>
                        <button onclick="setCash(100000)" class="bg-gray-100 hover:bg-blue-100 py-2 rounded font-bold transition">100k</button>
                        <button onclick="setCash(200000)" class="bg-gray-100 hover:bg-blue-100 py-2 rounded font-bold transition">200k</button>
                        <button onclick="setCash(500000)" class="bg-gray-100 hover:bg-blue-100 py-2 rounded font-bold transition">500k</button>
                    </div>
                    <input type="number" id="cashReceived" class="w-full p-3 border-2 border-gray-200 rounded-lg text-right text-2xl font-mono text-green-600 focus:border-green-500 outline-none" placeholder="0">
                </div>

                <button onclick="checkout()" class="w-full bg-blue-600 text-white py-4 rounded-2xl mt-6 font-black text-xl hover:bg-blue-700 transform active:scale-95 transition shadow-lg">
                    XU·∫§T H√ìA ƒê∆†N
                </button>
            </div>
        </div>
    </div>

    <div class="fixed bottom-0 left-0 w-7/12 p-4 bg-black bg-opacity-80 text-white hidden" id="historyPanel">
         <div class="flex justify-between items-center mb-2">
             <h3 class="font-bold uppercase text-yellow-400 text-sm">Giao d·ªãch v·ª´a th·ª±c hi·ªán</h3>
             <button onclick="document.getElementById('historyPanel').classList.add('hidden')" class="text-xs bg-gray-600 px-2 rounded">ƒê√≥ng</button>
         </div>
         <div id="historyLog" class="text-xs"></div>
    </div>

    <script>
        // C·∫≠p nh·∫≠t d·ªØ li·ªáu s·∫£n ph·∫©m v·ªõi link ·∫£nh ch·∫•t l∆∞·ª£ng h∆°n
        const products = [
            { id: 1, name: 'B√°nh Quy Oreo Socola', price: 15000, category: 'B√°nh k·∫πo', img: 'https://images.unsplash.com/photo-1558961363-fa8fdf82db35?q=80&w=400&auto=format&fit=crop' },
            { id: 2, name: 'Coca Cola Lon 330ml', price: 12000, category: 'N∆∞·ªõc gi·∫£i kh√°t', img: 'https://images.unsplash.com/photo-1622483767028-3f66f32aef97?q=80&w=400&auto=format&fit=crop' },
            { id: 3, name: 'M√¨ H·∫£o H·∫£o T√¥m Chua Cay', price: 5000, category: 'M√¨ t√¥m', img: 'https://images.unsplash.com/photo-1569718212165-3a8278d5f624?q=80&w=400&auto=format&fit=crop' },
            { id: 4, name: 'N∆∞·ªõc m·∫Øm Nam Ng∆∞ 750ml', price: 42000, category: 'Gia v·ªã', img: 'https://images.unsplash.com/photo-1589113103503-49654d88b75f?q=80&w=400&auto=format&fit=crop' },
            { id: 5, name: 'K·∫πo d·∫ªo Haribo', price: 25000, category: 'B√°nh k·∫πo', img: 'https://images.unsplash.com/photo-1582050048266-3d70f0f5b12f?q=80&w=400&auto=format&fit=crop' },
            { id: 6, name: 'Pepsi Kh√¥ng Calo', price: 11000, category: 'N∆∞·ªõc gi·∫£i kh√°t', img: 'https://images.unsplash.com/photo-1543253687-c931c8e01820?q=80&w=400&auto=format&fit=crop' }
        ];

        let cart = [];

        function renderProducts(filter = 'All') {
            const grid = document.getElementById('productGrid');
            grid.innerHTML = '';
            const filtered = products.filter(p => filter === 'All' || p.category === filter);
            
            filtered.forEach(p => {
                grid.innerHTML += `
                    <div onclick="addToCart(${p.id})" class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-2xl cursor-pointer transition-all border-2 border-transparent hover:border-blue-400 group">
                        <img src="${p.img}" class="product-image group-hover:scale-105 transition-transform duration-300">
                        <div class="p-4 text-center">
                            <p class="font-bold text-gray-700 text-lg mb-1 line-clamp-1">${p.name}</p>
                            <p class="text-blue-600 font-black text-xl">${p.price.toLocaleString()}ƒë</p>
                            <p class="text-xs text-gray-400 mt-1 uppercase">${p.category}</p>
                        </div>
                    </div>
                `;
            });
        }

        function addToCart(id) {
            const product = products.find(p => p.id === id);
            const item = cart.find(c => c.id === id);
            if(item) { item.qty++; } else { cart.push({...product, qty: 1}); }
            renderCart();
        }

        function updateQty(id, delta) {
            const item = cart.find(c => c.id === id);
            if(item) {
                item.qty += delta;
                if(item.qty <= 0) cart = cart.filter(c => c.id !== id);
            }
            renderCart();
        }

        function renderCart() {
            const container = document.getElementById('cartItems');
            const totalEl = document.getElementById('totalAmount');
            if(cart.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-400 mt-10 italic">Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o</p>';
                totalEl.innerText = '0ƒë';
                return;
            }
            
            container.innerHTML = '';
            let total = 0;
            cart.forEach(item => {
                total += item.price * item.qty;
                container.innerHTML += `
                    <div class="flex justify-between items-center bg-white p-3 rounded-xl shadow-sm border-l-4 border-blue-500">
                        <div class="flex-1">
                            <p class="font-bold text-gray-800">${item.name}</p>
                            <p class="text-sm text-blue-500">${item.price.toLocaleString()}ƒë x ${item.qty}</p>
                        </div>
                        <div class="flex items-center gap-3 bg-gray-100 p-1 rounded-lg">
                            <button onclick="updateQty(${item.id}, -1)" class="w-8 h-8 flex items-center justify-center bg-white rounded shadow hover:bg-red-50 text-red-500 font-bold">-</button>
                            <span class="w-6 text-center font-bold">${item.qty}</span>
                            <button onclick="updateQty(${item.id}, 1)" class="w-8 h-8 flex items-center justify-center bg-white rounded shadow hover:bg-green-50 text-green-500 font-bold">+</button>
                        </div>
                    </div>
                `;
            });
            totalEl.innerText = total.toLocaleString() + 'ƒë';
        }

        function filterCategory(cat) {
            renderProducts(cat);
        }

        function setCash(amount) {
            document.getElementById('cashReceived').value = amount;
        }

        function checkout() {
            if(cart.length === 0) return alert("Vui l√≤ng ch·ªçn s·∫£n ph·∫©m!");
            const total = cart.reduce((sum, i) => sum + (i.price * i.qty), 0);
            const cash = parseInt(document.getElementById('cashReceived').value) || 0;
            const customer = document.getElementById('customerName').value || "Kh√°ch l·∫ª";
            const now = new Date().toLocaleString('vi-VN');

            if(cash < total) return alert("Ti·ªÅn kh√°ch ƒë∆∞a c√≤n thi·∫øu " + (total - cash).toLocaleString() + "ƒë");

            // Hi·ªÉn th·ªã l·ªãch s·ª≠
            document.getElementById('historyPanel').classList.remove('hidden');
            const log = `‚óè ${now} | ${customer} | T·ªïng: ${total.toLocaleString()}ƒë (Th·ªëi: ${(cash - total).toLocaleString()}ƒë)`;
            const history = document.getElementById('historyLog');
            history.innerHTML = `<div>${log}</div>` + history.innerHTML;

            alert("THANH TO√ÅN TH√ÄNH C√îNG!\n------------------------\nKh√°ch: " + customer + "\nT·ªïng: " + total.toLocaleString() + "ƒë\nTi·ªÅn th·ªëi: " + (cash - total).toLocaleString() + "ƒë");
            
            // Reset
            cart = [];
            document.getElementById('cashReceived').value = '';
            document.getElementById('customerName').value = '';
            renderCart();
        }

        // L·∫Øng nghe √¥ t√¨m ki·∫øm
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const val = e.target.value.toLowerCase();
            const grid = document.getElementById('productGrid');
            grid.innerHTML = '';
            products.filter(p => p.name.toLowerCase().includes(val)).forEach(p => {
                grid.innerHTML += `
                    <div onclick="addToCart(${p.id})" class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-2xl cursor-pointer transition-all border-2 border-transparent hover:border-blue-400 group">
                        <img src="${p.img}" class="product-image group-hover:scale-105 transition-transform duration-300">
                        <div class="p-4 text-center">
                            <p class="font-bold text-gray-700 text-lg mb-1 line-clamp-1">${p.name}</p>
                            <p class="text-blue-600 font-black text-xl">${p.price.toLocaleString()}ƒë</p>
                        </div>
                    </div>
                `;
            });
        });

        renderProducts();
    </script>
</body>
</html>
